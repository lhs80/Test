LSJPParser=function(){};LSJPParser.prototype.constructor=LSJPParser;LSJPParser.prototype.parse=function(b,a){a.readUInt32();a.readUInt32();a.readUInt32();var c=a.readUInt32();a.readUInt32();a.readString();var d=this.parseOSGBClass(a);"osg::PagedLOD"==d?this.parseOSGBPagedLOD(b,a,c,b.arryMaterials):"osg::Group"==d&&this.parseOSGBGroup(b,a,c,b.arryMaterials)};LSJPParser.prototype.parseOSGBClass=function(b){var a=b.readString();b.readUInt32();return a};LSJPParser.prototype.parseOSGBObject=function(b,a){b.readString();b.readUInt32();b.readUChar8()};LSJPParser.prototype.parseOSGBNode=function(b,a){b.readUChar8();b.readUChar8();b.readUChar8();b.readUChar8();b.readUChar8();b.readUChar8();b.readUInt32();b.readUChar8()};LSJPParser.prototype.parseOSGBGroup=function(b,a,c,d){this.parseOSGBObject(a,c);this.parseOSGBNode(a,c);if(a.readUChar8())for(var f=a.readUInt32(),e=0;e<f;++e)if("osg::PagedLOD"==this.parseOSGBClass(a)){var g=new LSJPNode;b.addNode(g);this.parseOSGBPagedLOD(g,a,c,d)}};LSJPParser.prototype.parseOSGBPagedLOD=function(b,a,c,d){this.parseOSGBObject(a,c);this.parseOSGBNode(a,c);a.readUInt32();var f=a.readUChar8(),e=0,g=0;if(f){var e=a.readDouble(),g=a.readDouble(),f=a.readDouble(),h=a.readDouble();b.bdSphere.push(e);b.bdSphere.push(g);b.bdSphere.push(f);b.bdSphere.push(h)}e=a.readInt32();0==e?b.enRangeMode=0:1==e&&(b.enRangeMode=1);if(f=a.readUChar8())for(b.childRanges.splice(0,b.childRanges.length),g=a.readUInt32(),e=0;e<g;++e){var f=a.readFloat(),h=a.readFloat(),k=new LSJPNode;b.addNode(k);b.childRanges.push(f);b.childRanges.push(h)}(f=a.readUChar8())&&a.readUChar8()&&a.readString();a.readUInt32();a.readUChar8();if(f=a.readUChar8()){g=a.readUInt32();for(e=0;e<g;++e)f=a.readString(),e<b.children.length&&(b.children[e].strDataPath=f);g=a.readUInt32();for(e=0;e<g;++e)a.readFloat(),a.readFloat()}if(f=a.readUChar8())for(g=a.readUInt32(),f=null,e=0;e<g;++e)f=e<b.children.length?b.children[e]:null,h=this.parseOSGBClass(a),"osg::Node"==h?(this.parseOSGBObject(a,c),this.parseOSGBNode(a,c)):"osg::Geode"==h&&this.parseOSGBGeode(f,a,c,d)};LSJPParser.prototype.parseOSGBGeode=function(b,a,c,d){this.parseOSGBObject(a,c);this.parseOSGBNode(a,c);var f=!1,e=f=0;if(f=a.readUChar8())if(f=a.readUInt32(),0<f)for(e=0;e<f;++e)"osg::Geometry"==this.parseOSGBClass(a)&&this.parseOSGBGeometry(b,a,c,d)};LSJPParser.prototype.parseOSGBDrawable=function(b,a,c,d){var f=null;if(a.readUChar8()){var e=a.readString(),g=a.readUInt32();if("osg::StateSet"==e){for(var e=0,h=d.length;e<h;e++)if(g==d[e].id){f=d[e];b.matIndex=e;break}if(void 0===f||null==f)f=new LSJPNodeMat,f.id=g,d.push(f),b.matIndex=d.length-1,this.parseOSGBStateSet(b,a,c,f)}}a.readUChar8();a.readUChar8();a.readUChar8();a.readUChar8();a.readUChar8();a.readUChar8();a.readUChar8();a.readUChar8();a.readUChar8();a.readUChar8();return f};LSJPParser.prototype.parseOSGBStateSet=function(b,a,c,d){var f;this.parseOSGBObject(a,c);var e=a.readUChar8(),g=0;if(e&&(e=a.readUInt32(),0<e))for(g=0;g<e;++g)a.readInt32(),a.readInt32();if(e=a.readUChar8())for(e=a.readUInt32(),g=0;g<e;++g)f=this.parseOSGBClass(a),"osg::Material"==f&&this.parseOSGBMaterial(a,c,d),a.readInt32();if(e=a.readUChar8())for(e=a.readUInt32(),g=0;g<e;++g){f=a.readUInt32();for(var h=0;h<f;++h)a.readInt32(),a.readInt32()}if(e=a.readUChar8())for(e=a.readUInt32(),g=0;g<e;++g)for(var k=a.readUInt32(),h=0;h<k;++h)f=this.parseOSGBClass(a),"osg::Texture2D"==f&&this.parseOSGBTexture2D(b,a,c,d),a.readInt32();a.readUChar8();a.readInt32();a.readInt32();a.readInt32();a.readString();a.readUChar8();a.readUChar8();a.readUChar8()};LSJPParser.prototype.parseOSGBMaterial=function(b,a,c){this.parseOSGBObject(b,a);this.parseOSGBStateAttribute(b,a);b.readInt32();if(a=b.readUChar8())b.readUChar8(),b.readFloat32Array(4),b.readFloat32Array(4);if(a=b.readUChar8())b.readUChar8(),a=b.readFloat32Array(4),b.readFloat32Array(4),a.getFloat32(0,!0),a.getFloat32(4,!0),a.getFloat32(8,!0);if(a=b.readUChar8())b.readUChar8(),b.readFloat32Array(4),b.readFloat32Array(4);if(a=b.readUChar8())b.readUChar8(),b.readFloat32Array(4),b.readFloat32Array(4);if(a=b.readUChar8())b.readUChar8(),b.readFloat(),b.readFloat()};LSJPParser.prototype.parseOSGBTexture=function(b,a){var c=b.readUChar8();c&&b.readInt32();(c=b.readUChar8())&&b.readInt32();(c=b.readUChar8())&&b.readInt32();(c=b.readUChar8())&&b.readInt32();(c=b.readUChar8())&&b.readInt32();b.readFloat();b.readUChar8();b.readUChar8();b.readUChar8();b.readUChar8();b.readFloat64Array(4);b.readInt32();b.readInt32();b.readUChar8();b.readUChar8();b.readUChar8();b.readUChar8();b.readInt32();b.readInt32();b.readFloat()};LSJPParser.prototype.parseOSGBTexture2D=function(b,a,c,d){this.parseOSGBObject(a,c);this.parseOSGBStateAttribute(a,c);this.parseOSGBTexture(a,c);if(a.readUChar8()){94<c&&a.readString();a.readInt32();b=a.readString();a.readInt32();var f=!1;switch(a.readInt32()){case 1:b="IMAGE_INLINE_FILE_"+b;var f=!0,e=a.readUInt32();if(0<e){var e=a.readUChar8Array2(e),g=b.substring(b.lastIndexOf("."),b.length).toLowerCase(),h;".jpeg"==g||".jpg"==g?h="jpeg":".png"==g?h="png":".gif"==g?h="gif":".icon"==g&&(h="x-icon");d.imgBlob=new Blob([e],{type:h});d.bUrl=!1}}""==b||f||(d.imgUrl=b);this.parseOSGBImage(a,c)}a.readInt32();a.readInt32()};LSJPParser.prototype.parseOSGBImage=function(b,a){this.parseOSGBObject(b,a)};LSJPParser.prototype.parseOSGBStateAttribute=function(b,a){b.readUChar8();b.readUChar8()};LSJPParser.prototype.parseOSGBGeometry=function(b,a,c,d){this.parseOSGBObject(a,c);this.parseOSGBDrawable(b,a,c,d);for(var f=a.readUInt32(),e=d=d=0,g=0;g<f;++g){d=a.readInt32();e=a.readInt32();96<c&&a.readInt32();var h=0,k;switch(d){case 50:a.readInt32();a.readInt32();break;case 53:h=a.readUInt32();0<h&&(k=a.readUInt16Array(h));break;case 54:h=a.readUInt32(),0<h&&(k=a.readUInt32Array(h))}if(0<h)switch(e){case 4:if(53==d)for(b.indices=new Uint16Array(h),d=0;d<h;d++)b.indices[d]=k.getUint16(2*d,!0);else if(54==d)for(b.indices=new Uint32Array(h),d=0;d<h;d++)b.indices[d]=k.getUint32(4*d,!0)}}if(d=a.readUChar8()){c=a.readUChar8();a.readUInt32();c=a.readInt32();switch(c){case 16:c=a.readInt32();if(0<c)for(c*=3,k=a.readFloat32Array(c),b.verts=new Float32Array(c),d=0;d<c;d++)b.verts[d]=k.getFloat32(4*d,!0);break;case 19:if(c=a.readInt32(),0<c)for(c*=3,k=a.readFloat64Array(c),b.verts=new Float32Array(c),d=0;d<c;d++)b.verts[d]=k.getFloat64(8*d,!0)}a.readUChar8();a.readInt32();a.readInt32()}if(d=a.readUChar8())if(c=a.readUChar8()){a.readUInt32();c=a.readInt32();switch(c){case 16:if(c=a.readInt32(),0<c)for(c*=3,k=a.readFloat32Array(c),b.normals=new Float32Array(c),d=0;d<c;d++)b.normals[d]=k.getFloat32(4*d,!0)}a.readUChar8();a.readInt32();a.readInt32()}if(d=a.readUChar8())if(c=a.readUChar8()){a.readUInt32();c=a.readInt32();switch(c){case 4:case 5:c=a.readInt32();if(0<c)for(k=a.readUInt32Array(c),b.colors=new Uint32Array(c),b.colorPerNum=1,d=0;d<c;d++)b.colors[d]=k.getUint32(4*d,!0);break;case 11:c=a.readInt32();if(0<c)for(c*=4,k=a.readUChar8Array(c),b.colors=new Uint8Array(c),b.colorPerNum=4,d=0;d<c;d++)b.colors[d]=k.getUint8(d,!0);break;case 17:if(c=a.readInt32(),0<c)for(c*=4,k=a.readFloat32Array(c),b.colors=new Float32Array(c),b.colorPerNum=4,d=0;d<c;d++)b.colors[d]=k.getFloat32(4*d,!0)}a.readUChar8();a.readInt32();a.readInt32()}a.readUChar8();a.readUChar8();if(d=a.readUChar8())for(k=a.readInt32(),d=0;d<k;++d)if(c=a.readUChar8()){a.readUInt32();c=a.readInt32();switch(c){case 15:if(c=a.readInt32(),0<c){c*=2;f=a.readFloat32Array(c);g=new Float32Array(c);for(d=0;d<c;d++)g[d]=f.getFloat32(4*d,!0);b.uvs.push(g)}}a.readUChar8();a.readInt32();a.readInt32()}a.readUChar8();a.readUChar8()};